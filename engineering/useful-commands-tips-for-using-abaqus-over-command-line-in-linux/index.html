<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Saiwal">
  <meta name="description" content="Useful commands, tips for using ABAQUS over command-line in linux | Coming from Windows If you are a windows user then you&#39;ll need a ssh client like...">
  
  <base href="https://saiwal.github.io">

  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">  
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" type="text/css" media="all">
  <link rel="stylesheet" href="https://saiwal.github.io/theme/css/font.css" type="text/css" media="all">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://saiwal.github.io/theme/css/style.css" type="text/css" media="all">

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://saiwal.github.io/theme/js/functions.min.js"></script>

  
 

  <link href="https://saiwal.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Saiwal's Notes Full Atom Feed" />

<meta name="keywords" content="abaqus, linux">


  <title>Useful commands, tips for using ABAQUS over command-line in linux</title>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-30714481-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-30714481-2');
</script>

  
</head>

<body class="home blog">
  <div>
    <header class="site-header">
      <nav class="navbar navbar-default" role="navigation">
        <div class="container">
          <div class="row">
            <div class="site-navigation-inner col-sm-12">
              <div class="navbar-header">
                <button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
              </div>
              <div class="collapse navbar-collapse navbar-ex1-collapse">
              <ul id="menu-all-pages" class="nav navbar-nav">
                <li class="menu-item"><a href="http://iitk.ac.in" >IITK
<i class="fa  fa-lg"></i></a></li>
                <li class="menu-item"><a href="http://home.iitk.ac.in/~saiwal" >IITK homepage
<i class="fa  fa-lg"></i></a></li>
              </ul>
              </div>
              <div class="social">   
                <a href="https://www.youtube.com/mrsaiwal" title="Youtube" >
<i class="fa fa-youtube fa-lg"></i></a>
                <a href="https://github.com/saiwal" title="Github" >
<i class="fa fa-github fa-lg"></i></a>
              </div>
            </div>
          </div>
        </div>
      </nav><!-- .site-navigation -->

      <div class="container">
      <div id="logo">
        <span class="site-name"><a class="navbar-brand" href="https://saiwal.github.io"><img width="310" src="" class="attachment-full size-full" alt="Saiwal's Notes">          </a>
        </span><!-- end of .site-name -->
      </div><!-- end of #logo -->
        <div class="tagline">
                <a href="https://saiwal.github.io/category/academia.html" >Academia (3)</a> &#124; 
                <a href="https://saiwal.github.io/category/engineering.html" >Engineering (16)</a> &#124; 
                <a href="https://saiwal.github.io/category/misc.html" >Misc (1)</a> &#124; 
        </div>
    </div>

  </header><!-- #masthead -->
  </div>
    <div id="content" class="site-content">
      <div class="container main-content-area">
        <div class="row">
          <div class="main-content-inner col-sm-12 col-md-12">
            <div id="primary" class="content-area">
              <div id="main" class="site-main" role="main">
                <div class="article-container">
<article>
  <div class="blog-item-wrap">
    <div class="post-inner-content">
      <header class="entry-header page-header">
        <span class="cat-item"><time datetime="2018-11-30 00:00:00+05:30">Fri 30 November 2018</time></span>
        <h1 class="entry-title"><a href="https://saiwal.github.io/engineering/useful-commands-tips-for-using-abaqus-over-command-line-in-linux/">Useful commands, tips for using ABAQUS over command-line in linux</a></h1>
      </header><!-- .entry-header -->
      <div class="fb-like" data-href="https://saiwal.github.io/engineering/useful-commands-tips-for-using-abaqus-over-command-line-in-linux/" data-layout="standard" data-action="like" data-show-faces="false" data-share="true"></div>
      <div class="entry-content">
        <h2 id="coming from windows">Coming from Windows</h2>
<p>If you are a windows user then you'll need a ssh client like 'putty' to have access to your remote server over ssh and a file transfer client such as 'FileZilla' for transferring large files across machines conveniently.</p>
<p>Once you have access to your remote server you need to be familiar with some basic unix commands to be able to makeuse of abaqus via the command line.</p>
<h2 id="server addresses at iitk: (internal use only)">Server addresses at iitk: (Internal use only)</h2>
<p>The following link lists the various servers available in computer center at iitk campus:</p>
<p><a href="http://www.iitk.ac.in/ccnew/index.php/labs/linux-lab">http://www.iitk.ac.in/ccnew/index.php/labs/linux-lab</a></p>
<h2 id="basic linux commands">Basic Linux Commands</h2>
<h3 id="pwd">pwd</h3>
<p>short for "present working directory", this command displays the full path to the directory you are currently working in. It helps you make sense of your location on the server.</p>
<h3 id="cd">cd <directory name=""></directory></h3>
<p>To navigate to a directory</p>
<p>To navigate out of a directory one level up, use <code>cd ..</code></p>
<h3 id="mkdir">mkdir <directory name=""></directory></h3>
<p>To create a new directory</p>
<h3 id="rm">rm <filename></filename></h3>
<p>To delete a file/directory.</p>
<h3 id="man">man <command name=""/></h3>
<p>To display any command manual/help. Lists available options for that particular command.</p>
<h3 id="top">top</h3>
<p>A task manager to display list of running processes. You can stop/kill unresponsive commands from here, get an overview of consumed system resources, etc. To exit use <code>q</code>.</p>
<h3 id="bash">bash</h3>
<p>Some remote servers do not display the bash prompt by default which often leads to some keys not working, keys behaving unexpectedly. If that happens  you may run <code>bash</code> from your current shell to start a bash shell.</p>
<h3 id="nano">nano <filename></filename></h3>
<p>A lightweight text viewer/editor. To exit use <code>ctrl + x</code>.</p>
<h3 id="vi/vim">vi/vim <filename></filename></h3>
<p>An advanced text editor which offers additional options from nano. Meant for advanced users only. To exit use <code>:q</code>.</p>
<h3 id="miscellaneous tips">Miscellaneous Tips</h3>
<ul>
<li><code>Ctrl+C</code>, <code>Ctrl+Z</code> are your friends when it comes to unresponsive programs at the terminal.</li>
<li>Use the <code>Up</code> and <code>Down</code> keys at the terminal to go through your command history. Saves you from retyping the entire line again and again.</li>
<li>at bash prompt you can use <code>Ctrl+R</code> to search through your command  history.</li>
<li>Use the <code>Tab</code> key to auto-complete commands and file-names.</li>
</ul>
<h2 id="job submission_1">Job submission</h2>
<p>Oncce you have copied your input file, user subroutine file (if any) over to the remote server directory using filezilla, the following command can be used to submit a job remotely.</p>
<p><code>abaqus job=&lt;jobname&gt; inp=&lt;input filename&gt;</code></p>
<p>If your analysis requires a subroutine,</p>
<p><code>abaqus job=&lt;jobname&gt; user=&lt;subroutine filename&gt; inp=&lt;input filename&gt;</code></p>
<p>where the values within &lt;&gt; can be of your choice.</p>
<p>To monitor the  progress of your analysis job, you can display the content of <jobname>.sta file using nano. however this does not update the status file as it progresses. To dynamically display the progress, you may use the tail command:</jobname></p>
<p><code>tail -f &lt;jobname&gt;.sta</code></p>
<p>If for some reason you need to kill your running jobs, you can either use <code>top</code> to kill the relebvant process or use <code>killall &lt;process name&gt;</code> to end the proceess.</p>
<p>The process name can be found from the <code>top</code> command.</p>
<p>After the pre-processing,analysis is finished you will end up with your odb file in your working directory. You can then copy it over to your machine using filezilla.</p>
<h2 id="remote access via abaqus gui">Remote access via Abaqus GUI</h2>
<p>ABAQUS has support for submitting a job on a remote server and accessing the odb file remotely. In this case the data will reside on the remote computer. This is a good way to do the modelling on your personal computer and do the heavy computational work on a remote HPC machine. </p>
<p>There are two main steps involved in setting up remote access, namely network odb connector and remote job submission. We will take a look at both of them individually.</p>
<h3 id="network odb connector">Network ODB Connector</h3>
<h4 id="pre-requisites">Pre-requisites</h4>
<ol>
<li>Both the host and remote should be running on linux.</li>
<li>The login username should be identical on both machines.</li>
<li>Password-less ssh login should be setup on remote server. The procedure is described <a href="https://www.tecmint.com/ssh-passwordless-login-using-ssh-keygen-in-5-easy-steps/">here</a>.</li>
</ol>
<h4 id="steps">Steps</h4>
<ol>
<li>
<p>Go to the network odb connector manager from the file menu.</p>
<p><img alt="connector" src="https://saiwal.github.io/images/remote-abaqus1.png"/></p>
</li>
<li>
<p>Create a new connection by clicking on Create...</p>
<p><img alt="connector" src="https://saiwal.github.io/images/remote-abaqus2.png"/></p>
</li>
<li>
<p>Fill up the details of host name and directory where files are located. In the Advanced tab, choose ssh, automatically start the server. In the <code>remote ABAQUS execution procedure</code> provide the full location of abaqus executable, for example <code>/usr/local/softs/Abaqus2017/DassaultSystemes/SIMULIA/Commands/abaqus</code>. Choose a lower time-out of 1-2 minutes.</p>
</li>
<li>
<p>Click on start to start server.</p>
</li>
<li>
<p>TO connect to remote directory, click open and browse to the Network Connections. Here you should find your remote directory.</p>
</li>
</ol>
<h3 id="remote job submission to remote queue._1">Remote job submission to remote queue.</h3>
<h4 id="pre-requisites_1">Pre-requisites</h4>
<ol>
<li>
<p>The environment file on the host computer should have the ques and server address defined. e.g. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">onCaeStartup</span><span class="p">():</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">makeQueues</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="n">session</span><span class="o">.</span><span class="n">Queue</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'ceq'</span><span class="p">,</span>
          <span class="n">queueName</span><span class="o">=</span><span class="s1">'myqueue'</span><span class="p">,</span>
          <span class="n">driver</span><span class="o">=</span><span class="s1">'/usr/local/softs/Abaqus2017/DassaultSystemes/SIMULIA/Commands/abaqus'</span><span class="p">,</span>
          <span class="n">hostName</span><span class="o">=</span><span class="s1">'172.20.44.111'</span><span class="p">,</span>
          <span class="n">directory</span><span class="o">=</span><span class="s1">'/home/saiwal/scratch'</span><span class="p">)</span>
<span class="n">addImportCallback</span><span class="p">(</span><span class="s1">'job'</span><span class="p">,</span> <span class="n">makeQueues</span><span class="p">)</span>
</pre></div>
</li>
<li>
<p>The environment file on remote computer should also have queue class definition as below.</p>
<div class="highlight"><pre><span></span><span class="c1">#Queue define</span>
<span class="n">run_mode</span> <span class="o">=</span> <span class="n">BATCH</span>
<span class="kn">from</span> <span class="nn">driverQueues</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">queues</span><span class="p">[</span><span class="s1">'atq'</span><span class="p">]</span>    <span class="o">=</span> <span class="n">AtQueue</span><span class="p">()</span>
<span class="n">queues</span><span class="p">[</span><span class="s1">'batchq'</span><span class="p">]</span> <span class="o">=</span> <span class="n">BatchQueue</span><span class="p">()</span>
<span class="n">queues</span><span class="p">[</span><span class="s1">'hold'</span><span class="p">]</span>   <span class="o">=</span> <span class="n">HoldQueue</span><span class="p">()</span>

<span class="n">run_mode</span> <span class="o">=</span> <span class="n">BATCH</span>
<span class="kn">from</span> <span class="nn">driverQueues</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="k">class</span> <span class="nc">NiceQueue</span><span class="p">(</span><span class="n">Queue</span><span class="p">):</span>
    <span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">'Executes analysis using Linux nice command.'</span>
    <span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
    <span class="n">job</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">'job'</span><span class="p">]</span>
    <span class="n">after</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'after'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="n">verbose</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'verbose'</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'after'</span><span class="p">,</span> <span class="s1">''</span><span class="p">):</span>
        <span class="c1"># a descriptive string must be supplied as data when</span>
        <span class="c1"># raising a QueueError exception</span>
        <span class="c1">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
        <span class="k">raise</span> <span class="n">QueueError</span><span class="p">,</span> \
          <span class="s1">'"after" is not a valid argument for this queue.'</span>
    <span class="c1"># run nice under bourne shell to eliminate platform dependencies</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="s2">"/bin/bash -c 'nice </span><span class="si">%s</span><span class="s2"> python ./</span><span class="si">%s</span><span class="s2">.com 1&amp;gt;./</span><span class="si">%s</span><span class="s2">.log 2&amp;gt;&amp;amp;1 &amp;amp;'"</span> \
          <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDriverName</span><span class="p">(),</span> <span class="n">job</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>

<span class="c1">#queue definitions</span>
<span class="n">queues</span><span class="p">[</span><span class="s1">'myqueue'</span><span class="p">]</span>     <span class="o">=</span> <span class="n">NiceQueue</span><span class="p">()</span>
</pre></div>
<p>This is merely an example, the parameters would change according to how you would like to submit your job.</p>
<p>Remember that queueName should be identical on both machines. The local machine would show <code>name</code> as submission queue but the job would be submitted to the queue named <code>myqueue</code>.</p>
</li>
<li>
<p>While submitting the job make sure to choose remote queue in job submission dialogue box.</p>
<p><img alt="connector" src="https://saiwal.github.io/images/remote-abaqus3.png"/></p>
</li>
</ol>
      </div><!-- .entry-content -->
      <br /><br />
      <div class="article_meta">
        Tags:
          <a href="https://saiwal.github.io/tags/abaqus.html">abaqus</a>,          <a href="https://saiwal.github.io/tags/linux.html">linux</a>      </div>
    </div>
  </div>
</article><!-- #post-## -->
                </div>
              </div><!-- #main -->
          </div><!-- #primary -->
        </div>
      </div><!-- close .row -->
    </div><!-- close .container -->
  </div><!-- close .site-content -->




  <div id="footer-area">
    <footer id="colophon" class="site-footer" role="contentinfo">
      <div class="site-info container">
        <div class="row">
                    <div class="copyright col-md-12">
                    <a href="https://saiwal.github.io/pages/privacy-policy">Privacy Policy</a> | 
                    <a href="https://saiwal.github.io/feeds/all.atom.xml">Atom Feed</a> | 
                    <a href="https://saiwal.github.io/sitemap.xml">Sitemap</a><br />
                    This site uses the <a href="https://github.com/limbenjamin/voce">voce</a> theme by <a href="//limbenjamin.com/">Benjamin Lim</a><br />
                    &copy; 2012-2016 <a href="https://saiwal.github.io">Saiwal</a> </div>
        </div>
      </div><!-- .site-info -->
      <div class="scroll-to-top" style="display: none;"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
    </footer><!-- #colophon -->
  </div>

  <script type="text/javascript">
    window.addEventListener('load', function(){
    if (window.location.pathname != '/' && window.location.pathname != '/index.html'){
      window.scroll(0, document.getElementById('main').offsetTop);
    }})
  </script>




</body>
</html>